# ========================================
# COMPATIBILIDAD DOCKER PARA IPTABLES-NFT
# No abre puertos, solo crea las cadenas que Docker necesita
# ========================================

table ip filter {
    chain FORWARD {
        type filter hook forward priority filter; policy accept;
    }

    chain DOCKER {
        # Docker mete reglas aquí
    }

    chain DOCKER-USER {
        # Reglas del usuario (Docker lo exige)
        # Dejamos vacío — Docker lo maneja
        return;
    }

    chain DOCKER-FORWARD {
        # Docker mete reglas aquí
    }
}

table ip nat {
    chain DOCKER {
        # Docker mete reglas aquí
    }

    chain PREROUTING {
        type nat hook prerouting priority dstnat; policy accept;
    }

    chain OUTPUT {
        type nat hook output priority dstnat; policy accept;
    }

    chain POSTROUTING {
        type nat hook postrouting priority srcnat; policy accept;
    }
}
